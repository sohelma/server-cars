!function(){"use strict";var o="https://grsm.io",r="https://partnerlinks.io";function n(o){return"string"!=typeof o?"":decodeURIComponent(atob(o).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""))}var e,t,s=(e=function(o,r){var n;n=function(){function o(){for(var o=0,r={};o<arguments.length;o++){var n=arguments[o];for(var e in n)r[e]=n[e]}return r}function r(o){return o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(e){function t(){}function s(r,n,s){if("undefined"!=typeof document){"number"==typeof(s=o({path:"/"},t.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(o){}n=e.write?e.write(n,r):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var i in s)s[i]&&(u+="; "+i,!0!==s[i]&&(u+="="+s[i].split(";")[0]));return document.cookie=r+"="+n+u}}function a(o,n){if("undefined"!=typeof document){for(var t={},s=document.cookie?document.cookie.split("; "):[],a=0;a<s.length;a++){var u=s[a].split("="),i=u.slice(1).join("=");n||'"'!==i.charAt(0)||(i=i.slice(1,-1));try{var c=r(u[0]);if(i=(e.read||e)(i,c)||r(i),n)try{i=JSON.parse(i)}catch(o){}if(t[c]=i,o===c)break}catch(o){}}return o?t[o]:t}}return t.set=s,t.get=function(o){return a(o,!1)},t.getJSON=function(o){return a(o,!0)},t.remove=function(r,n){s(r,"",o(n,{expires:-1}))},t.defaults={},t.withConverter=n,t}((function(){}))},o.exports=n()},e(t={exports:{}},t.exports),t.exports);function a(o){if(null==o)return null;const r=s.get(o);return null==r||null==r?null:r}function u(o){const r=s.get(),n={};for(const e in r)e.startsWith(o)&&(n[e]=r[e]);return 0===Object.keys(n).length?null:n}function i(o,r,n,e,t,s){t=t||"/",s=s||"Lax";const a=n?`Domain=${n};`:"";document.cookie=`${o}=${r}; ${a} Expires=${e}; Path=${t}; SameSite=${s}`}function c(o,r,n){var e=new Date(Date.now()+7776e6).toUTCString();(new TextEncoder).encode(r).length<=255&&(i(o,r,n,e),a(o)!==r&&i(o,r,location.host,e))}const m="gspk",g="gsxid",_="pscd",d=g,l="growSumoPartnerKey",p=_,w="trackingV1",f="ps_xid",k=f,h="ps_partner_key",v=h,y="trackingV2",b="ps_rc_fallback",x=["grsm.io","partnerlinks.io","partnerstack.com","growsumo.com"];var S={_b64d:n,_gc:a,_sc:c,domain_v1:o,domain_v2:r,source:null,fallback_domain:null,cookie_domain:location.host,pscd:null,initialized:!1,allowedDomains:[],_current_script_hostname:(()=>{try{return document.currentScript&&document.currentScript.src?new URL(document.currentScript.src).hostname:null}catch(o){return null}})(),data:{amount:0,currency:"USD",email:"",name:"",public_key:"",host_domain:""},_rd:function(){growsumo.data.amount=0,growsumo.data.email="",growsumo.data.name="",growsumo.data.currency="USD"},_initialize:function(o,r=null){growsumo.cookie_domain=growsumo.cookie_domain.split(":")[0];var n=growsumo.cookie_domain.split(".");n.length>2&&(growsumo.cookie_domain="."+n.slice(1).join(".")),growsumo.data.host_domain=location.host,growsumo.source=growsumo._detect_source(),growsumo.fallback_domain=growsumo._get_fallback_domain(),growsumo.data.public_key=o,growsumo.allowedDomains=r||[],growsumo._gpscd(),growsumo._gpk(),growsumo._gxid(),growsumo.initialized=!0},_detect_source:function(){if(growsumo._gpbn(h)||growsumo._gpbn(f))return y;if(growsumo._gpbn(m)||growsumo._gpbn(g))return w;var o=[a(v),a(k)],r=[a(l),a(d)].some((o=>!!o)),n=o.some((o=>!!o));return r&&n?y:r?w:n?y:null},_get_tracking_domain:function(){return null!=growsumo.pscd?"https://"+growsumo.pscd:growsumo.source===y?growsumo.domain_v2:growsumo.domain_v1},_is_ps_domain:function(o){return!!o&&x.some((r=>o===r||o.endsWith("."+r)))},_gpk:function(){var o=growsumo._gpbn(m),r=growsumo._gpbn(h);r&&(o=r),o&&(o=n(o)),(o=growsumo._spk(o))||(o=growsumo._get_redirect_cookies_from_tld()),o||growsumo._get_pk_primary_cookie_mirror()},_get_fallback_domain:function(){return growsumo.source==y?growsumo.domain_v1:growsumo.domain_v2},_get_redirect_cookies_from_tld:function(){var o=u("_ps_partner_key_")||u("_grsmpk"),r=null;o&&(r=Object.values(o)[0],growsumo._spk(r),growsumo._flag_redirect_cookies_fallback());var n=u("_ps_xid_")||u("_gsxid");return n&&1===Object.keys(n).length&&(growsumo._sxid(Object.values(n)[0]),growsumo._flag_redirect_cookies_fallback()),r},_flag_redirect_cookies_fallback:function(){c(b,"true",growsumo.cookie_domain)},_get_pk_primary_cookie_mirror:function(){var o=growsumo._get_tracking_domain(),r=growsumo.pscd?"":"?get_pscd=true",n=growsumo._ccr("GET",o+"/pr/grc/"+growsumo.data.public_key+r);n.onreadystatechange=()=>{var r=this._parse_grc_response(n,o);if(4==n.readyState&&null==growsumo.data.partner_key&&null==growsumo.data.xid){if(r&&r.customDomains&&r.customDomains.length&&r.customDomains.length>0)r.customDomains.forEach((o=>{var r=growsumo._ccr("GET","https://"+o+"/pr/grc/"+growsumo.data.public_key);r?(r.onreadystatechange=()=>{var n=this._parse_grc_response(r);!n||null==n.partnerKey&&null==n.xid||growsumo._spscd(o)},r.send(null)):console.error("CORS not supported")}));growsumo._get_grc_fallback_cookie_mirror()}},n.send(null)},_get_grc_fallback_cookie_mirror:function(){var o=growsumo._ccr("GET",growsumo.fallback_domain+"/pr/grc/"+growsumo.data.public_key);if(o.onreadystatechange=()=>this._parse_grc_response(o),o.send(null),growsumo.pscd){var r=growsumo.fallback_domain==growsumo.domain_v1?growsumo.domain_v2:growsumo.domain_v1,n=growsumo._ccr("GET",r+"/pr/grc/"+growsumo.data.public_key);n.onreadystatechange=()=>{this._parse_grc_response(n)},n.send(null)}},_parse_grc_response:function(o){if(4==o.readyState&&200==o.status&&o.responseText.length>0)try{var r=JSON.parse(o.responseText);return null==r.partnerKey&&null==r.xid||(growsumo._spk(r.partnerKey),growsumo._sxid(r.xid),growsumo._flag_redirect_cookies_fallback()),r}catch(o){console.error("Error parsing response JSON response")}},_spk:function(o){return o||(o=a(v)||a(l)),o&&(growsumo.data.partner_key=o,c(l,o,growsumo.cookie_domain),c(v,o,growsumo.cookie_domain)),o},_gpscd:function(){let o=growsumo._gpbn(_);growsumo.allowedDomains.length>0&&o&&!growsumo.allowedDomains.includes(o)&&(o=null),o?growsumo._spscd(o):growsumo._spscd()},_spscd:function(o){let r=null!=o?o:a(p);if(null!=r)growsumo.pscd=r,c(p,r,growsumo.cookie_domain);else try{var n=growsumo._get_current_script_source_custom_domain();n&&(growsumo.pscd=n,c(p,n,growsumo.cookie_domain))}catch(o){console.error("Error getting custom domain",o)}},_get_current_script_source_custom_domain:function(){var o=["/pr/js","/partnerstack.min.js","/growsumo.min.js"],r=document.getElementsByTagName("script"),n=Array.from(r).filter((r=>{if(r.src&&o.some((o=>r.src.endsWith(o)))){var n=new URL(r.src).hostname;return!growsumo._is_ps_domain(n)}return!1}));return 1==n.length?new URL(n[0].src).hostname:(n.length>1&&console.error("Multiple scripts found, cannot determine custom domain"),null)},_gxid:function(){var o=growsumo._gpbn(g),r=growsumo._gpbn(f);r&&(o=r,growsumo.source=y),o?growsumo._sxid(o):growsumo._sxid()},_sxid:function(o){let r=o||a(k);null==r&&(r=a(d)),null!=r&&(growsumo.data.xid=r,c(d,r,growsumo.cookie_domain),c(k,r,growsumo.cookie_domain))},_gpbn:function(o){return function(o){o=o.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+o+"(=([^&#]*)|&|#|$)"),n=r.exec(location.search);return n||(n=r.exec(location.hash)),n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}(o)},_ccr:function(o,r,n){var e=new XMLHttpRequest;return e.withCredentials=!0,"withCredentials"in e?e.open(o,r,!0):"undefined"!=typeof XDomainRequest?(e=new XDomainRequest).open(o,r):e=null,e},_mr:function(o,r,n,e){var t=growsumo._get_tracking_domain()+r,s=growsumo._ccr(o,t);s?(s.onload=s.onerror=function(t){if(!growsumo.pscd||[200,400].includes(s.status)||!r.endsWith("/signup")||void 0===growsumo.data.partner_key&&void 0===growsumo.data.xid)e&&"function"==typeof e&&e(t);else{var a=growsumo._ccr(o,growsumo.domain_v1+r,n);a.onload=a.onerror=function(t){if(200!=a.status){var s=growsumo._ccr(o,growsumo.domain_v2+r,n);s.onload=s.onerror=function(o){e(o)},s.send(JSON.stringify(n))}else e(t)},a.send(JSON.stringify(n))}},s.send(JSON.stringify(n))):console.error("CORS not supported")},setData:function(o,r,n,e){growsumo.data.amount=o,growsumo.data.currency=r,growsumo.data.email=n,growsumo.data.name=e},createSignup:function(o){growsumo._spk(),growsumo.data.name=String(growsumo.data.name),growsumo.data.email=String(growsumo.data.email),growsumo.data.currency=String(growsumo.data.currency),growsumo.data.amount=Number(growsumo.data.amount);var r=d,n="/pr/signup";growsumo.source==y&&(r=k,n="/signup");var e=a(r);e&&(growsumo.data.xid=String(e)),"true"==a(b)&&(growsumo.data.rc_fallback=!0),growsumo._mr("POST",n,growsumo.data,(function(r){growsumo._rd(),o&&"function"==typeof o&&o(r)}))}};window.growsumo=S}();
